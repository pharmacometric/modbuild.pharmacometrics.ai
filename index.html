<!doctypehtml><html lang=en><script src=https://cdn.tailwindcss.com></script><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js></script><body class=bg-slate-100><header class="w-full shadow-md bg-white mb-8 p-4"><div class="max-w-7xl mx-auto"><h1 class="flex items-center font-bold text-slate-800 gap-3 text-3xl"><i class="fa-solid text-blue-600 fa-capsules"></i><span>PK/PD Model Visualizer & Code Generator (<small>v0.0169</small>)</span></h1></div></header><main class="flex gap-2 justify-center flex-wrap items-start px-8"><div class="flex flex-col gap-8"style=width:30%;min-width:400px><div class="bg-white border border-slate-300 shadow-lg p-6"><h2 class="flex items-center gap-2 font-bold justify-center border-b mb-4 pb-3 text-2xl text-center text-slate-800"><i class="fa-solid text-blue-600 fa-font-awesome"></i><span>Model Selector</span></h2><div class="grid gap-4 grid-cols-2"><div><label class="text-sm font-semibold text-slate-600 block mb-1"for=compartment-select>Compartments</label> <select class="text-sm border-slate-300 rounded-md w-full"id=compartment-select><option value=1>1-Comp<option value=2 selected>2-Comp<option value=3>3-Comp</select></div><div><label class="text-sm font-semibold text-slate-600 block mb-1"for=admin-select>Administration</label> <select class="text-sm border-slate-300 rounded-md w-full"id=admin-select><option value=iv>IV Bolus<option value=oral>Oral (1st Order)<option value=transit>Oral (Transit)</select></div></div><button class="flex items-center gap-2 font-bold justify-center px-4 py-2.5 rounded-lg shadow-md text-white transition-colors w-full bg-blue-600 hover:bg-blue-700 mt-6"id=draw-button><i class="fa-solid fa-paintbrush"></i><span>Draw / Update Model</span></button></div><div class="bg-white border border-slate-300 shadow-lg"><div class="border-slate-200 border-b"><nav aria-label=Tabs class="flex gap-6 -mb-px"><button class="text-sm border-b-2 font-medium px-4 py-3 shrink-0 tab-button border-blue-500 text-blue-600"data-tab=diagram-settings>Diagram Settings</button> <button class="text-sm border-b-2 font-medium px-4 py-3 shrink-0 tab-button border-transparent hover:border-gray-300 text-gray-500"data-tab=plot-settings>Plot Settings</button> <button class="text-sm border-b-2 font-medium px-4 py-3 shrink-0 tab-button border-transparent hover:border-gray-300 text-gray-500"data-tab=how-to-use>How to Use</button></nav></div><div class=p-6><div class=tab-panel id=diagram-settings-panel></div><div class="tab-panel hidden"id=plot-settings-panel></div><div class="tab-panel hidden"id=how-to-use-panel><div class="max-w-none prose prose-sm"><h3 class="mb-2 font-bold text-lg">Welcome to Will's PK/PD Visualizer!</h3><p>This application helps you visualize standard pharmacokinetic models, see a simulated output, and generate code for popular modeling software.<h4 class="font-semibold mb-1 mt-4">How It Works:</h4><ol class="list-decimal list-inside space-y-2"><li><strong>Select a Model:</strong> Use the dropdowns in the "Model Library" panel above to choose the number of compartments and the administration type.<li><strong>Customize the Diagram:</strong> Use the controls in the active "Diagram Settings" tab to change compartment shapes, colors, text, and labels for all rate constants.<li><strong>Customize the Plot:</strong> Switch to the "Plot Settings" tab to change the dosing regimen, axis titles, plot line color, canvas size, and manually set the axis ranges and tick steps.<li><strong>View Results:</strong> The diagram and the concentration-time plot in the center panel will update automatically as you make changes.<li><strong>Export:</strong> Use the right-hand panel to download high-quality images of the diagram or plot, reproducible code for the visualizer itself, or model code for NONMEM, Monolix, and R.</ol></div></div></div></div></div><div class="flex flex-col gap-8"style=width:45%;min-width:400px><div class="bg-slate-300 border border-slate-300 p-4 shadow-lg"style=overflow-x:scroll><canvas class=bg-white height=450 id=main-canvas width=500></canvas></div><div class="bg-white border border-slate-300 shadow-lg p-4"><div class="flex items-center justify-between mb-2"><div class=w-1/3></div><h3 class="font-semibold text-lg text-slate-700 text-center w-1/3">Simulated C vs. Time</h3><div class="w-1/3 text-right"><label class="font-semibold text-slate-500 text-xs"for=plot-scale-select>Scale:</label> <select class="text-xs border-slate-300 p-1 rounded-md"id=plot-scale-select><option value=linear selected>Linear<option value=log>Semi-log</select></div></div><canvas class=w-full height=300 id=plot-canvas width=860></canvas></div></div><div class="flex flex-col bg-white border border-slate-300 flex-grow gap-6 p-6 shadow-lg"style=min-width:350px><h2 class="flex items-center gap-2 border-b font-semibold pb-2 text-lg text-slate-700"><i class="fa-solid fa-file-image text-green-600"></i><span>Export Image</span></h2><div class="gap-3 items-center grid grid-cols-[120px_1fr]"><label class="text-sm font-semibold text-slate-600 text-right"for=canvas-width-input>Diagram Width:</label><input class="text-sm border-slate-300 rounded-md w-full"id=canvas-width-input min=200 step=10 type=number value=500></div><div class="gap-3 items-center grid grid-cols-[120px_1fr]"><label class="text-sm font-semibold text-slate-600 text-right"for=canvas-height-input>Diagram Height:</label><input class="text-sm border-slate-300 rounded-md w-full"id=canvas-height-input min=200 step=10 type=number value=450></div><div class="gap-3 items-center grid grid-cols-[120px_1fr]"><label class="text-sm font-semibold text-slate-600 text-right"for=image-format-select>Format:</label><select class="text-sm border-slate-300 rounded-md w-full"id=image-format-select><option value=png>PNG<option value=jpeg>JPG</select></div><div class="gap-3 items-center grid grid-cols-[120px_1fr]"><label class="text-sm font-semibold text-slate-600 text-right"for=image-scale-input>Scale Factor:</label><input class="text-sm border-slate-300 rounded-md w-full"id=image-scale-input min=1 step=0.5 type=number value=1></div><div class="text-xs text-slate-500 -mt-2 text-right"id=output-dimensions-preview>(Output: 2700 x 1350 px)</div><div class="flex flex-col gap-3 mt-2"><button class="flex items-center gap-2 font-bold justify-center px-4 py-2.5 rounded-lg shadow-md text-white transition-colors w-full bg-green-600 hover:bg-green-700"id=download-diagram-button><i class="fa-solid fa-download"></i><span>Download Diagram</span></button> <button class="flex items-center gap-2 font-bold justify-center px-4 py-2.5 rounded-lg shadow-md text-white transition-colors w-full bg-teal-600 hover:bg-teal-700"id=download-plot-button><i class="fa-solid fa-chart-line"></i><span>Download Plot</span></button></div><h2 class="flex items-center gap-2 border-b font-semibold pb-2 text-lg text-slate-700 mt-4"><i class="fa-solid fa-code text-purple-600"></i><span>Reproduce Diagram</span></h2><button class="flex items-center gap-2 font-bold justify-center px-4 py-2.5 rounded-lg shadow-md text-white transition-colors w-full bg-purple-600 hover:bg-purple-700"id=download-code-button><i class="fa-solid fa-file-code"></i><span>Download Visualizer Code</span></button><h2 class="flex items-center gap-2 border-b font-semibold pb-2 text-lg text-slate-700 mt-4"><i class="fa-solid fa-cogs text-sky-600"></i><span>Download Model Code</span></h2><div class="flex flex-col gap-3"><button class="w-full shadow-md font-bold px-4 py-2.5 rounded-lg text-white bg-slate-700 hover:bg-slate-800"id=download-nonmem-button><i class="fa-solid fa-database"></i> NONMEM</button> <button class="w-full shadow-md font-bold px-4 py-2.5 rounded-lg text-white bg-orange-500 hover:bg-orange-600"id=download-monolix-button><i class="fa-solid fa-file-lines"></i> MONOLIX</button> <button class="w-full shadow-md font-bold px-4 py-2.5 rounded-lg text-white bg-blue-800 hover:bg-blue-900"id=download-r-button><i class="fa-brands fa-r-project"></i> R mrgsolve</button></div></div></main><script src=pkpd.js></script><script src=code-generators.js></script><script src=custom-func.js></script></body></html>
